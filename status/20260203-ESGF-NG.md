# 2026-02-03 ESGF-NG Status

ESGF-NG status as of February, 2026.

ESGF-NG is the next generation of the core architecture for the Earth System Grid Federation. Designed in 2024 and deployed in 2025 and 2026, it replaces the ESGF-1.0 core architecture. See [ESGF-NG Docs](../docs/README.md) for further information.

**NOTE:** ESGF-NG will be used for CMIP7 and subsequent activities. *None of the below applies to CMIP6 or earlier activities, with the exception of CORDEX CMIP6, which has not yet been published to ESGF.*


## Monthly Highlights

* ESGF2-US is working on production deployment of the ESGF Event Stream and ESGF-West STAC catalog. ESGF2-US has elected to continue using the existing University of Chicago AWS environment for deployment and is working on populating it with the ESGF-West production services. We hope both CEDA and ESGF2-US will be ready for onboarding publishers this month (February).
* The ESGF Publisher team is currently adding ESGF-NG features to the application to support: (1) authentication (Globus and EGI Check-In), and (2) STAC catalog updates.
* The ESGF Publisher team is testing ESGF-NG publication using CMIP6, CMIP7 and CORDEX-CMIP6 datasets and schemas.
* We’re also now working on a proposed design of the ESGF Replicator utility for ESG data nodes. (We expect this to largely take the form of new features in the existing esgpull aka esg-download tool.)

## Current and Recent Work

### Production Deployments
The CEDA team is looking into moving its STAC API to a production URL.

The ESGF2-US team has elected to continue using the existing University of Chicago AWS environment for deployment instead of setting up a new AWS environment via Argonne or Oak Ridge. The Globus Operations team will deploy and operate the ESGF-West core architecture in this environment. The February deployment includes:
1. Establishing a new ElasticSearch cluster in the new environment, migrating the existing ESGF-1.5 search index to it, and creating new ESGF-NG search indices for the production and staging environments.
2. Deploying production instances of the ESGF STAC catalog components to the new environment.
3. Establishing staging instances of the ESGF STAC catalog and Confluent Kafka event stream service. These instances will be used for performing pre-release testing.

### Data Challenges and Load Testing
In January, the ESGF Publisher team published CMIP6 and CMIP7 datasets using the STAC extensions (JSON schema) produced by the ESG CV and ESGVOC projects. (This testing activity used a deployment of ESGF-NG in the EGSF-West environment.) See the Publisher Application section below for more detail. This work will continue in February.

In February, the ESGF Publisher team will be testing CORDEX-CMIP6 publication in ESGF-NG. See the CORDEX CMIP6 section below for more detail.

Prior data challenges:
* **Completed:** Data Challenge [01](https://github.com/ESGF/esgf-roadmap/blob/main/data-challenges/01-Publication.md). See 11-03-2025 report for more detail.
* **Completed:** Data Challenge [02](https://github.com/ESGF/esgf-roadmap/blob/main/data-challenges/02-Retraction.md) & [03](https://github.com/ESGF/esgf-roadmap/blob/main/data-challenges/03-Update.md). See 11-03-2025 report for more detail.
* **Completed:** Load Testing. See 12-01-2025 report for more detail.
* **Completed:** AGU25 Demonstration Catalog. We republished a subset of CMIP6 datasets to an ESGF-West STAC catalog and used the resulting catalog to demonstrate the STAC catalog and ESGF client applications to scientists at the AGU25 meeting.

Remaining issues are tracked in [this GitHub project epic](https://github.com/ESGF/esgf-roadmap/issues/94)

### Publisher Application
We're working with the developers of the [ESGF Publisher](https://github.com/ESGF/esg-publisher) application (an installable command-line interface tool used by modeling centers) to ensure that it works with the ESGF-NG core architecture. The new features include:
1. Authentication with Globus and EGI Check-in.
2. Publishing with the STAC Transaction API.

This work will continue in February. Issues are tracked in [this Github project epic](https://github.com/ESGF/esgf-roadmap/issues/95).

### ESGF Replicator Application
We are currently drafting a technical approach for the ESGF Replicator application, assessing the state of current tools and comparing to known use cases and requirements.  See the [GitHub Repository](https://github.com/ESGF2-us/esgf-replicator) for user stories, requirements, and key design points.

This work will continue in February. Issues are tracked in [this GitHub project epic](https://github.com/ESGF/esgf-roadmap/issues/121).

### Discovery and Data Access Applications
We continue to coordinate with ESGF data access application teams as they test ESGF-NG STAC catalogs (specifically, the STAC discovery API and ESGF project schemas and CVs) and report issues. In December, we worked on the "free text fields" search feature in the ESGF-West STAC catalog.

This work will continue in February. Issues are tracked in [this GitHub project epic](https://github.com/ESGF/esgf-roadmap/issues/103).

Data access applications include:
* Radiant Earth STAC Browser
* DKRZ’s customisation of the STAC Browser. (Includes support for JupyterLite and visualisations)
* Metagrid
* Intake-esgf
* Esg-pull
* Wget-API
* CMCC
* Climate4Impact
* ESMValTool
* ESGF-py-client - we intend to deprecate this application

### Schemas and Controlled Vocabularies (CVs)
[No significant changes since last month.]

The CV Pydantic models for CMIP7 have now been finalized. We are currently in a phase of reviewing all terms registered in the CV to ensure they are compliant with. The JSON schemas for the STAC transaction API have been configured for the input4MIPs, obs4REF, CMIP7, and CORDEX-CMIP6 projects. The next release of `esgvoc` will enable all of these to be generated in alignment with both the models and the registered terms. The CMIP6 STAC extension generated by ESGVOC, based on JSON schema provided by the ESGF CV team, has steadily improved and is now validating most of our sample CMIP6 datasets. This is enough to allow us to test the STAC validation code with actionable results.

Remaining issues are tracked in [this GitHub project epic](https://github.com/ESGF/esgf-roadmap/issues/96).

### CORDEX CMIP6
[No significant changes since last month.]

We're preparing to work with the CORDEC team to test CORDEX CMIP6 publishing using ESGF-NG. This is a test publication intended to verify that our new architecture can handle data from a new project. (The CORDEX publication will have to be redone when we have a final deployment of ESGF-NG). The key tasks include:
1. CORDEX must work with the ESGF CV and ESGVOC teams to supply a schema and controlled vocabulary for CORDEX CMIP6 data.
2. CORDEX must make some of their CMIP6 data available for our team to copy to our systems for the test.
3. We will configure the ESGF Publisher application to use the CORDEX CMIP6 schema, and perform a publication run using CORDEX's data, and validate the resulting catalogs.

This work will continue in February. Issues are tracked in [this GitHub project epic](https://github.com/ESGF/esgf-roadmap/issues/106).

### Rapid Evaluation Framework (REF) and Persistent IDs (PIDs)
[No significant changes since last month.]

We're coordinating with the ESGF Rapid Evaluation Framework (REF) project and the ESGF Persistent IDs (PIDs) product to ensure that the ESGF-NG Event Stream and STAC Catalogs meet their needs. In November, our load testing activity produced a new event stream and STAC catalogs with obs4MIPS datasets, which are of interest to the REF team. We've onboarded REF and PID team members and are coordinating with them to inspect the event stream and catalogs and report issues.

This work will continue in February. Issues are tracked in [this GitHub project epic](https://github.com/ESGF/esgf-roadmap/issues/97).


## Status of ESGF-NG Components

### Architecture and Design
Our current work is still consistent with the [design as written](https://github.com/ESGF/esgf-roadmap/core_architecture/design.md).

One significant addition (that doesn't change any of the written design) is a dependency in the STAC Transaction API on STAC extensions (JSON schemas) generated by the [esg-vocab](https://github.com/ESGF/esgf-vocab) (aka ESGVOC) project based on specifications coordinated in the ESGF CVs team.
* All ESGF STAC extensions are registered with the STAC community's extensions repository.
* **IMPORTANT:** This addition means that before an ESGF project can publish items, the project must register its metadata schema and controlled vocabularies with the ESGF CV team and the ESGVOC project must publish a STAC extension (aka JSON schema) for the project.

### STAC Discovery API
This is the API used by ESGF client applications to discover ESGF datasets. Each of the East and West STAC Catalogs provides a STAC Discovery API. Both East and West use the STAC community's [STAC-FastAPI](https://github.com/stac-utils/stac-fastapi) implementation, but they use different backends. (East uses an [ElasticSearch backend](https://github.com/stac-utils/stac-fastapi-elasticsearch-opensearch), West uses a [Globus Search backend](https://github.com/esgf2-us/west-discovery).)

See "Discovery and Data Access Applications" above for details of our work in December, including a link to issues currently being tracked.

### Event Consumer
[No significant changes since last month.]

The Event Consumer subscribes to the ESGF Event Stream, reads events from the stream, and performs the corresponding changes in a STAC Catalog. These changes may be addition of new items (PUT) or changes to existing items (POST, PATCH). If the Event Consumer detects a consistency error, it publishes an error to the ESGF Event Stream's error topic. The ESGF event consumer supports (via configuration) either an ElasticSearch or Globus Search index as its backend.

NOTE: The error event schema is preliminary and may change to address issues identified during testing or early data publication.

### STAC Transaction API
[No significant changes since last month.]

The Transaction API enables STAC clients to make changes to the catalog. These changes may be addition of new items (POST) or changes to an existing item (PUT, PATCH). ESGF's STAC catalogs will understand DELETE requests but no client will be authorized to perform them. For each request, the STAC Transaction API:
1. confirms the authorization of the request,
2. validates the item metadata, and
3. posts an event on the ESGF Event Stream.

It does not implement the change in the catalog. Instead, it posts an event on the ESGF event stream with the details of the required change. The catalog change itself is performed by the Event Consumers for each ESGF STAC catalog.

Data Challenge 03 tested all of the functionality described above. We believe the validation code (both for new items and for item changes) is complete and have tested it with our own version of the CMIP6 STAC extension. The metadata validation is still causing issues when using the ESGVOC-generate CMIP6 STAC extension because the CMIP6 CV is not yet stable.

### Event Stream
[No significant changes since last month.]

The ESGF event stream service is operated by Globus as part of the ESGF2-US project.  We are currently using [Confluent Data Streaming](https:/www.confluent.io), a managed Apache Kafka deployment hosted in AWS.

The event stream is currently being used for our ESGF-NG data challenges.
* Write access (ability to post events) is restricted to the East and West STAC catalogs.
* Read access (ability to subscribe to topics and read events) is limited to the CEDA and Globus teams who are conducting the data challenges.
* **We also granted Read access to engineers for the ESGF PID team.** They are evaluating the Event Stream for use in a new version of the ESGF PID service. They are using events generated from our data challenges in this evaluation. Their feedback has already led to improvements to ESGVOC's CMIP6 metadata schema.

We expect to onboard engineers for the ESGF Rapid Evaluation Framework (REF) team in August or September to enable them to explore the event stream with events from one or more ESGF-NG data challenges.

Before beginning production operation, we expect we will redeploy the service on a new Kafka cluster within the Confluent service. This should have no effect on clients other than an endpoint address change.

### Authentication and Authorization
[No significant changes since last month.]

The STAC Transaction API (see above) authenticates all client requests and authorizes requests against active project and data node registrations. The system used for authentication and authorization is configurable.
* For the ESGF-West STAC catalog, authentication is performed via Globus, and registration is performed via Globus Group memberships.
* For the ESGF-East STAC catalog, authentication is performed via EGI-Check In and registration is performed via EGI-Check In attributes.

As of September 2, 2025, we've tested all of the above functionality and it is working as expected.

We have one open issue, which is to enable separate authorization policies for replica add and replica remove operations. Separate policies are needed because for these operations, authorization should be based on the data node making the change, rather than the modeling team making the change.

NOTE: The current EGI-Check In implementation uses the OIDC authorization code flow. At some point in the future (as a low-priority development), CEDA plans to change this to the OIDC device flow.

### Catalog Consistency Errors
[No significant changes since last month.]

When catalog changes are requested via the STAC API (new items or updates to existing items), the API is not designed to return an error code to the calling client application if the change cannot be made in the catalog because of a consistency error. (E.g., if a new item is published and it conflicts with an existing item, or if a retraction is requested and the item does not exist.) Instead, the API always returns a code indicating a deferred operation. If the change cannot be made in the STAC catalog, the catalog will generate an error on the ESGF Event Stream's "errors" topic.

We currently do not have a plan for how to respond to errors reported on the Event Stream.


### Publisher Registration
[No significant changes since last month.]

Publisher registration for both East and West STAC catalogs is currently a manual process. Catalog operators must manually set up authorization policy.


## Timelines

| The Past | Activity |
| --- | --- |
| 2019-11 | ESGF Future Architecture workshop held in UK - [Report](https://doi.org/10.5281/zenodo.3928223) |
| 2024-04 | ESGF-NG proposed at 10th ESGF conference in Bethesda, MD (USA) |
| 2024-11 | ESGF mini-conference in Abingdon (UK); Data challenges proposed and challenges 1-3 designed and scheduled for Jan/Feb 2025 |
| 2024-12-13 | Globus performs Data Challenge 01 round 1. (Includes end-to-end basic CMIP6 dataset publication.)|
| 2025-01-30 | CEDA performs Data Challenge 01 round 1. |
| 2025-03-25 | Data Challenge 01 round 2 completed. (Includes both Globus and EGI-Check In authorization and schema-level validation.) |
| 2025-05-01 | ESGVOC team provided first version of STAC generator capability for ESGF projects |
| 2025-07-01 | STAC Transaction API uses STAC extensions generated by ESGVOC for item validation. Extensions are available for CMIP6, Input4MIPS, and Obs4MIPS. |
| 2025-07-01 | Onboarded engineers from the ESGF PID team to the Event Stream for preliminary evaluation. (See Event Stream below for outcomes.)|
| 2025-08-19 | [Data Challenge 03](https://github.com/lliming/esgf-roadmap/blob/main/data-challenges/03-Update.md) completed. (Includes dataset updates and retractions and catalog consistency errors reported on the event stream.) **East & West catalogs available for client testing. See link above for references.**|
|2025-09-29 | West catalog updated to support additional STAC search filters, paging, and term count aggregations (aka facets). See Data Challenge 03 link above for API endpoint.|
| 2025-11-18 | First load testing run completed. (Includes controlled vocabulary validation, datasets from CMIP6 and Obs4MIPs, minimum of 100,000 events.) **East & West catalogs available for client testing.**|
| 2025-12-15 | AGU25 demonstration catalog published (West only) and presented at AGU25. |

The following timeline is estimated and subject to change.

| The Future | Activity |
| --- | --- |
| 2025-01-30 | Target for establishing production ESGF-NG publication capability for "friendly projects" |
| 2026-02-27 | Target for production ESGF-NG publication capability for all ESGF projects |
